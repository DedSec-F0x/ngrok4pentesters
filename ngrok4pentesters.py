#!/bin/python
import os 
import sys
import time
import subprocess
from os.path import expanduser
from subprocess import call
home = expanduser("~/.ngrok2/")
ngrok = """
authtoken: 'chave'

tunnels:
  http_apache:
    proto: http
    addr: 80
  tcp_metasploit:
    proto: tcp
    addr: 4444
  tcp1:
    proto: tcp
    addr: 8080


"""
RED   = "\033[1;31m"  
BLUE  = "\033[1;34m"
CYAN  = "\033[1;36m"
GREEN = "\033[0;32m"
BOLD    = "\033[;1m"
REVERSE = "\033[;7m"

#if len(sys.argv) < 2:
#	print(">>>>======================DEDSEC==========================<<<<")
#	print(" Use 'python ngrok4pentesters.py <seu_authtoken_do_ngrok>'")
#	print(">>>>======================DEDSEC==========================<<<<")
#	sys.exit(0)
#os.system('clear')
print('')
print('')
print(GREEN + """
                               __    
   ____   ____ _ _____ ____   / /__  
  / __ \ / __ `// ___// __ \ / //_/
 / / / // /_/ // /   / /_/ // ,<   
/_/ /_/ \__, //_/    \____//_/|_|   
        /____/                              
					   
""")

http = ('80')
https = ('443')
meta = ('4444')
tcp1 = ('7000')
tcp2 = ('7001')
tcp3 = ('7002')
tcp4 = ('8080')
print('')
print('')
time.sleep(3)
auth = (sys.argv[1])
print('')
art = ('ngrok')
ngrok = ngrok.replace('chave', auth)
arq = open('ngrok.yml', 'w')
arq.write(ngrok)
arq.close()

ngrok = ngrok.replace('80', http)
arq = open('ngrok.yml', 'w')
arq.write(ngrok)
arq.close()


title = ('--all')
ngrok = ngrok.replace('4444', meta)
arq = open('ngrok.yml', 'w')
arq.write(ngrok)
arq.close()


ngrok = ngrok.replace('8080', tcp4)
arq = open('ngrok.yml', 'w')
arq.write(ngrok)
arq.close()


print('')
print('')
print(GREEN+
'Iniciando...')

time.sleep(3)

os.system(art+' start '+title+' --region=eu')



